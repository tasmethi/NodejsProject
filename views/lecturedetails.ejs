<!DOCTYPE html>
<head>
    <title>
        Class Manager Portal
    </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
    <style>
        a {
        margin-left: 30px;
        margin-right: 30px;
        
    }
	body{
	margin-top:50px;
	background-color: rgb(202, 243, 216);
}
.card{
  width:auto;
	height:auto;
	position:fixed;
	top:170px;
	left:340px;
    background-color:rgb(25, 51, 53);
    white-space:inherit;
}
.card-header{
    font-family: Rockwell;
    color: beige;
    font-size: 15px;
}
.autocenter{
	float:none;
	margin:auto;
}
button {
    background-color:rgb(179, 214, 248);  ;
    font-family: Rockwell;
    color: beige;

}
label{
  font-family: Rockwell;
    color: beige;
    font-size: 12px;
}
p{
    font-family: Rockwell;
    color: beige;
    font-size: 12px;
}
 
.dropdown-toggle::after {
   transition: transform 0.15s linear; 
}
 
.show.dropdown .dropdown-toggle::after {
  transform: translateY(3px);
}
.dropdown-menu {
  margin-top: 0;
}
.dropdown-item:hover{
    background: none;
}
    </style>

<body>
    <%if(message!=""){%>
        <%if(message=="Success"){%>
        <div class="modal" id="successModal">
      <div class="modal-dialog">
        <div class="modal-content">
    
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Success</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
    
          <!-- Modal body -->
          <div class="modal-body">
          Lecture Details Entered Successfully!
          </div>
    
          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
          </div>
    
        </div>
      </div>
    </div>
    <script type="text/javascript">
        $("#successModal").modal();
    </script>
    <%}%>
    <%if(message=="Error"){%>
      <div class="modal" id="errorModal">
    <div class="modal-dialog">
      <div class="modal-content">
  
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Error</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
  
        <!-- Modal body -->
        <div class="modal-body">
        Entered class time clashes with another class time! Please select a different time!
        </div>
  
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
  
      </div>
    </div>
  </div>
  <script type="text/javascript">
      $("#errorModal").modal();
  </script>
  <%}%>
  <%if(message=="DateError"){%>
    <div class="modal" id="dateerrorModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Error</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
      Entered date cannot be a future date!
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>
<script type="text/javascript">
    $("#dateerrorModal").modal();
</script>
<%}%>
<%if(message=="TJoinError"){%>
  <div class="modal" id="tjoinerrorModal">
<div class="modal-dialog">
  <div class="modal-content">

    <!-- Modal Header -->
    <div class="modal-header">
      <h4 class="modal-title">Error</h4>
      <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>

    <!-- Modal body -->
    <div class="modal-body">
    Entered class date cannot be earlier than teacher joining date!
    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    </div>

  </div>
</div>
</div>
<script type="text/javascript">
  $("#tjoinerrorModal").modal();
</script>
<%}%>
<%if(message=="SJoinError"){%>
  <div class="modal" id="sjoinerrorModal">
<div class="modal-dialog">
  <div class="modal-content">

    <!-- Modal Header -->
    <div class="modal-header">
      <h4 class="modal-title">Error</h4>
      <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>

    <!-- Modal body -->
    <div class="modal-body">
    Entered class date cannot be earlier than student joining date!
    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    </div>

  </div>
</div>
</div>
<script type="text/javascript">
  $("#sjoinerrorModal").modal();
</script>
<%}%>
<%if(message=="TimeError"){%>
  <div class="modal" id="timeerrorModal">
<div class="modal-dialog">
  <div class="modal-content">

    <!-- Modal Header -->
    <div class="modal-header">
      <h4 class="modal-title">Error</h4>
      <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>

    <!-- Modal body -->
    <div class="modal-body">
    Start Time cannot be ahead of End Time!
    </div>

    <!-- Modal footer -->
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
    </div>

  </div>
</div>
</div>
<script type="text/javascript">
  $("#timeerrorModal").modal();
</script>
<%}}%>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <!-- Brand/logo -->
        <a class="navbar-brand">
          <img src="icon1.png" alt="logo" style="width:100px;">
        </a>
        <!-- Links -->
        <centre>
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Home
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
              <a class="dropdown-item" href="/">Main Home Page</a>
              <a class="dropdown-item" href="/cmportal">CM Portal</a>
              <div class="dropdown-divider"></div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Manage Students
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
              <a class="dropdown-item" href="/newstudent">Add New Student</a>
              <a class="dropdown-item" href="/viewstudents">View All Students</a>
              <div class="dropdown-divider"></div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Manage Teachers
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
              <a class="dropdown-item" href="/newteacher">Add New Teacher</a>
              <a class="dropdown-item" href="/viewteachers">View All Teachers</a>
              <div class="dropdown-divider"></div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Manage Courses
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
              <a class="dropdown-item" href="/newcourse">Add New Course</a>
              <a class="dropdown-item" href="/viewcourses">View All Courses</a>
              <div class="dropdown-divider"></div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/lecturedetails">Lecture Details</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/logout">Logout</a>
          </li>
          
        </ul>
    </centre>
      </nav>
      <div class="container">
		<div class="col-sm-6 autocenter">
			<center>
			<div class="card">
			<div class="card-header"> LECTURE DETAILS FORM
			</div>
			
			<div class="card-body">
				<form action="/lecturedetails" method="post" class="needs-validation" novalidate="">
            
                    <div class="row">
                        <div class="col">
                     
                          <label>Student Name: </label><select class="form-control" name="sname" id="sname" required><option></option>
                            <%if (message!="Success" && message!="Error" && message!="DateError" && message!="TimeError" && message!="SJoinError" && message!="TJoinError"){
                              let stud=JSON.parse(student)
                              for(let i=0;i < stud.length;i++){%>
                           <option value="<%=stud[i].name%>" name="student"> <%=stud[i].name%></option><%}}%></select>
                         <div class="invalid-feedback">Please Fill This Field!</div>
                      
                         <label>Class Date: </label><input class="form-control" type="date" name="cdate" id="cdate" required>
                         <div class="invalid-feedback">Please Fill This Field!</div>
                         <label>Chapter Name: </label><input class="form-control" type="text" name="chapname" id="chapname" placeholder="Enter Chapter Name" required>
                        <div class="invalid-feedback">Please Fill This Field!</div>
                        <label>Marks in Test (out of 20): </label><input class="form-control" type="number" name="marks" id="marks" placeholder="Enter Marks out of 20" optional>
                        <div class="invalid-feedback">Please Fill This Field!</div>
                        </div>
                        <div class="col">
                          <label>Teacher Name: </label><select class="form-control" name="tname" id="tname" required><option></option>
                            <%if (message!="Success" && message!="Error" && message!="DateError" && message!="TimeError"  && message!="SJoinError" && message!="TJoinError"){
                              let teach=JSON.parse(teacher)
                              for(let i=0;i < teach.length;i++){%>
                                <option value="<%=teach[i].name%>" name="teacher"><%=teach[i].name%></option><%}}%></select>
                          <div class="invalid-feedback">Please Fill This Field!</div>
                           <label>Class Start Time:</label><input class="form-control" type="time" name="stime" id="stime" required>
                          <div class="invalid-feedback">Please Fill This Field!</div>
                           <label>Topics Covered:</label><input class="form-control" type="text" name="topics" id="topics" placeholder="Enter Topics Covered" required>
                          <div class="invalid-feedback">Please Fill This Field!</div>
                          <br> <br> <button type="submit" class="btn btn-primary">Submit</button><br>
                                
                        </div>
                        <div class="col">
                            <label>Course Name: </label><select class="form-control" name="cname" id="cname" required><option></option>
                              <%if (message!="Success" && message!="Error" && message!="DateError" && message!="TimeError" && message!="SJoinError" && message!="TJoinError"){
                                let cl=JSON.parse(course)
                                for(let i=0;i < cl.length;i++){%>
                              <option value="<%=cl[i].coursename%>" name="course"><%=cl[i].coursename%></option><%}}%></select>
                          <div class="invalid-feedback">Please Fill This Field!</div>
                           <label>Class End Time:</label><input class="form-control" type="time" name="etime" id="etime" required>
                          <div class="invalid-feedback">Please Fill This Field!</div>
                         <label>Class Test Topic:</label><input class="form-control" type="text" name="testtopics" id="testtopics" placeholder="Enter Test Topics" optional>
                          <div class="invalid-feedback">Please Fill This Field!</div>
                         
                        </div>

                      </div>
  </div>
</form>
			</center>
			</div>
		</div>
	</div>
</div>
<script>
// Disable form submissions if there are invalid fields
(function() {
  'use strict';
  window.addEventListener('load', function() {
    // Get the forms we want to add validation styles to
    var forms = document.getElementsByClassName('needs-validation');
    // Loop over them and prevent submission
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();
</script>
</body>
</html>